<div class="user-profile-page">
    <div class="header">
        <button class="logout-btn" (click)="onLogout()">Logout</button>
        <div class="user-name">{{ (user$ | async)?.firstName }}</div>
    </div>

    <!-- Main Profile Container - All in One -->
    <div class="profile-container">
        <!-- Profile Header with Photo -->
        <div class="profile-header">
            <div class="profile-photo-container">
                <div class="profile-photo" #profilePhoto>JD</div>
            </div>
            
            <div class="photo-actions">
                <label for="fileInput" class="photo-btn" style="cursor: pointer;">Upload Photo</label>
                <button class="photo-btn" id="viewPhotoBtn">View Photo</button>
            </div>
                <input type="file" id="fileInput" #fileInput (change)="onFileSelected($event)" accept="image/*" />
        </div>

        <!-- Profile Content -->
        <div class="profile-content">
            <h2 class="section-title">Profile Information</h2>

            <div class="info-row">
                <div class="info-label">Full Name</div>
                <div class="info-value">{{ (user$ | async)?.firstName }} {{(user$ | async)?.secondName}}</div>
            </div>

            <div class="info-row">
                <div class="info-label">Email Address</div>
                <div class="info-value">{{(user$ | async)?.email}}</div>
            </div>

            <div class="edit-profile-section">
                <button class="edit-profile-btn">Edit Profile</button>
            </div>
        </div>
    </div>

    <!-- Crop Modal -->
    <div class="modal" id="cropModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Crop Your Photo</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>

            <div class="crop-container">
                <div class="crop-area">
                    <img id="cropImage" class="crop-image" src="" alt="Crop preview">
                    <div class="crop-circle"></div>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-btn cancel-btn" id="cancelBtn">Cancel</button>
                <button class="photo-btn" (click)="saveCroppedImage()">Save Photo</button>
            </div>
        </div>
    </div>
</div>
