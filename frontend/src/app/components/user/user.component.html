<ng-container *ngIf="(user$ | async) as user; else authScreens">

  <ng-container *ngIf="(getRole$ | async) as role">

    <!-- ✅ Admin Role -->
    <ng-container *ngIf="role === 'admin' && hasToken(); else userRole">
      <app-admin></app-admin>
    </ng-container>

    <!-- ✅ Normal User -->
    <ng-template #userRole>
      <app-user-profile></app-user-profile>
    </ng-template>

  </ng-container>

</ng-container>

<!-- ✅ Not Logged In → Auth Screens -->
<ng-template #authScreens>
  <ng-container *ngIf="!showLogin; else login">
    <app-user-signup (switchToLogin)="onShowLogin()"></app-user-signup>
  </ng-container>

  <ng-template #login>
    <app-user-login (switchToSignup)="onShowSignup()"></app-user-login>
  </ng-template>
</ng-template>
